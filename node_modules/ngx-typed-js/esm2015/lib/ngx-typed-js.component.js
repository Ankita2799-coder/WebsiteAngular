import { Component, EventEmitter, Input, Output, ViewChild } from '@angular/core';
import Typed from 'typed.js';
export class NgxTypedJsComponent {
    constructor() {
        this.typeSpeed = 30;
        this.completed = new EventEmitter();
        this.preStringTyped = new EventEmitter();
        this.stringTyped = new EventEmitter();
        this.lastStringBackspaced = new EventEmitter();
        this.typingPaused = new EventEmitter();
        this.typingResumed = new EventEmitter();
        this.reset = new EventEmitter();
        this.stopped = new EventEmitter();
        this.started = new EventEmitter();
        this.destroyed = new EventEmitter();
    }
    ngAfterViewInit() {
        this.typed = new Typed(this.content.nativeElement.querySelector('.typing'), this.options);
        if (this.showCursor !== false) {
            this.updateCursorStyle();
        }
    }
    toggle() {
        this.typed.toggle();
    }
    stop() {
        this.typed.stop();
    }
    start() {
        this.typed.start();
    }
    destroy() {
        this.typed.destroy();
    }
    doReset(restart) {
        this.typed.reset(restart);
    }
    get options() {
        var _a;
        const emit = (emitter) => () => emitter.emit();
        const emitIndex = (emitter) => (index) => emitter.emit(index);
        const opts = {
            strings: (_a = this.strings) !== null && _a !== void 0 ? _a : [''],
            stringsElement: this.stringsElement,
            typeSpeed: this.typeSpeed,
            startDelay: this.startDelay,
            backSpeed: this.backSpeed,
            smartBackspace: this.smartBackspace,
            shuffle: this.shuffle,
            backDelay: this.backDelay,
            fadeOut: this.fadeOut,
            fadeOutClass: this.fadeOutClass,
            fadeOutDelay: this.fadeOutDelay,
            loop: this.loop,
            loopCount: this.loopCount,
            showCursor: this.showCursor,
            autoInsertCss: this.autoInsertCss,
            attr: this.attr,
            bindInputFocusEvents: this.bindInputFocusEvents,
            contentType: this.contentType,
            onComplete: emit(this.completed),
            preStringTyped: emitIndex(this.preStringTyped),
            onStringTyped: emitIndex(this.stringTyped),
            onLastStringBackspaced: emit(this.lastStringBackspaced),
            onTypingPaused: emitIndex(this.typingPaused),
            onTypingResumed: emitIndex(this.typingResumed),
            onReset: emit(this.reset),
            onStop: emitIndex(this.stopped),
            onStart: emitIndex(this.started),
            onDestroy: emit(this.destroyed),
        };
        Object.keys(opts).forEach(key => {
            if (opts[key] === undefined) {
                delete opts[key];
            }
        });
        return opts;
    }
    updateCursorStyle() {
        const textElementStyle = getComputedStyle(this.content.nativeElement.querySelector('.typing'));
        const cursorElementStyle = this.content.nativeElement.querySelector('.typed-cursor').style;
        cursorElementStyle.fontSize = textElementStyle.fontSize;
        cursorElementStyle.color = this.cursorColor || textElementStyle.color;
    }
    ngOnChanges(changes) {
        this.typed.destroy();
        this.ngAfterViewInit();
    }
}
NgxTypedJsComponent.decorators = [
    { type: Component, args: [{
                selector: 'ngx-typed-js',
                template: "<div #wrapper>\n  <ng-content></ng-content>\n</div>\n",
                styles: [":host>>>.typing{display:inline}"]
            },] }
];
NgxTypedJsComponent.propDecorators = {
    cursorColor: [{ type: Input }],
    strings: [{ type: Input }],
    stringsElement: [{ type: Input }],
    typeSpeed: [{ type: Input }],
    startDelay: [{ type: Input }],
    backSpeed: [{ type: Input }],
    smartBackspace: [{ type: Input }],
    shuffle: [{ type: Input }],
    backDelay: [{ type: Input }],
    fadeOut: [{ type: Input }],
    fadeOutClass: [{ type: Input }],
    fadeOutDelay: [{ type: Input }],
    loop: [{ type: Input }],
    loopCount: [{ type: Input }],
    showCursor: [{ type: Input }],
    cursorChar: [{ type: Input }],
    autoInsertCss: [{ type: Input }],
    attr: [{ type: Input }],
    bindInputFocusEvents: [{ type: Input }],
    contentType: [{ type: Input }],
    completed: [{ type: Output }],
    preStringTyped: [{ type: Output }],
    stringTyped: [{ type: Output }],
    lastStringBackspaced: [{ type: Output }],
    typingPaused: [{ type: Output }],
    typingResumed: [{ type: Output }],
    reset: [{ type: Output }],
    stopped: [{ type: Output }],
    started: [{ type: Output }],
    destroyed: [{ type: Output }],
    content: [{ type: ViewChild, args: ['wrapper', { static: true },] }]
};
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibmd4LXR5cGVkLWpzLmNvbXBvbmVudC5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uL3Byb2plY3RzL25neC10eXBlZC1qcy9zcmMvbGliL25neC10eXBlZC1qcy5jb21wb25lbnQudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUEsT0FBTyxFQUFnQixTQUFTLEVBQUUsWUFBWSxFQUFFLEtBQUssRUFBYSxNQUFNLEVBQWlCLFNBQVMsRUFBQyxNQUFNLGVBQWUsQ0FBQztBQUN6SCxPQUFPLEtBQXFCLE1BQU0sVUFBVSxDQUFDO0FBTzdDLE1BQU0sT0FBTyxtQkFBbUI7SUFMaEM7UUFVbUIsY0FBUyxHQUFHLEVBQUUsQ0FBQztRQWtCZCxjQUFTLEdBQXVCLElBQUksWUFBWSxFQUFRLENBQUM7UUFDekQsbUJBQWMsR0FBeUIsSUFBSSxZQUFZLEVBQVUsQ0FBQztRQUNsRSxnQkFBVyxHQUF5QixJQUFJLFlBQVksRUFBVSxDQUFDO1FBQy9ELHlCQUFvQixHQUF1QixJQUFJLFlBQVksRUFBUSxDQUFDO1FBQ3BFLGlCQUFZLEdBQXlCLElBQUksWUFBWSxFQUFVLENBQUM7UUFDaEUsa0JBQWEsR0FBeUIsSUFBSSxZQUFZLEVBQVUsQ0FBQztRQUNqRSxVQUFLLEdBQXVCLElBQUksWUFBWSxFQUFRLENBQUM7UUFDckQsWUFBTyxHQUF5QixJQUFJLFlBQVksRUFBVSxDQUFDO1FBQzNELFlBQU8sR0FBeUIsSUFBSSxZQUFZLEVBQVUsQ0FBQztRQUMzRCxjQUFTLEdBQXVCLElBQUksWUFBWSxFQUFRLENBQUM7SUErRjdFLENBQUM7SUExRkMsZUFBZTtRQUNiLElBQUksQ0FBQyxLQUFLLEdBQUcsSUFBSSxLQUFLLENBQ3BCLElBQUksQ0FBQyxPQUFPLENBQUMsYUFBYSxDQUFDLGFBQWEsQ0FBQyxTQUFTLENBQUMsRUFDbkQsSUFBSSxDQUFDLE9BQU8sQ0FDYixDQUFDO1FBRUYsSUFBSSxJQUFJLENBQUMsVUFBVSxLQUFLLEtBQUssRUFBRTtZ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QUFDLFNBQVMsRUFBRSxFQUFFLE1BQU0sRUFBRSxJQUFJLEVBQUUiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQge0FmdGVyVmlld0luaXQsIENvbXBvbmVudCwgRXZlbnRFbWl0dGVyLCBJbnB1dCwgT25DaGFuZ2VzLCBPdXRwdXQsIFNpbXBsZUNoYW5nZXMsIFZpZXdDaGlsZH0gZnJvbSAnQGFuZ3VsYXIvY29yZSc7XG5pbXBvcnQgVHlwZWQsIHtUeXBlZE9wdGlvbnN9IGZyb20gJ3R5cGVkLmpzJztcblxuQENvbXBvbmVudCh7XG4gIHNlbGVjdG9yOiAnbmd4LXR5cGVkLWpzJyxcbiAgdGVtcGxhdGVVcmw6ICduZ3gtdHlwZWQtanMuY29tcG9uZW50Lmh0bWwnLFxuICBzdHlsZVVybHM6IFsnbmd4LXR5cGVkLWpzLmNvbXBvbmVudC5jc3MnXVxufSlcbmV4cG9ydCBjbGFzcyBOZ3hUeXBlZEpzQ29tcG9uZW50IGltcGxlbWVudHMgQWZ0ZXJWaWV3SW5pdCwgT25DaGFuZ2VzIHtcbiAgQElucHV0KCkgcHJpdmF0ZSBjdXJzb3JDb2xvcj86IHN0cmluZztcblxuICBASW5wdXQoKSBwcml2YXRlIHN0cmluZ3M6IHN0cmluZ1tdO1xuICBASW5wdXQoKSBwcml2YXRlIHN0cmluZ3NFbGVtZW50Pzogc3RyaW5nO1xuICBASW5wdXQoKSBwcml2YXRlIHR5cGVTcGVlZCA9IDMwO1xuICBASW5wdXQoKSBwcml2YXRlIHN0YXJ0RGVsYXk/OiBudW1iZXI7XG4gIEBJbnB1dCgpIHByaXZhdGUgYmFja1NwZWVkPzogbnVtYmVyO1xuICBASW5wdXQoKSBwcml2YXRlIHNtYXJ0QmFja3NwYWNlPzogYm9vbGVhbjtcbiAgQElucHV0KCkgcHJpdmF0ZSBzaHVmZmxlPzogYm9vbGVhbjtcbiAgQElucHV0KCkgcHJpdmF0ZSBiYWNrRGVsYXk/OiBudW1iZXI7XG4gIEBJbnB1dCgpIHByaXZhdGUgZmFkZU91dD86IGJvb2xlYW47XG4gIEBJbnB1dCgpIHByaXZhdGUgZmFkZU91dENsYXNzPzogc3RyaW5nO1xuICBASW5wdXQoKSBwcml2YXRlIGZhZGVPdXREZWxheT86IG51bWJlcjtcbiAgQElucHV0KCkgcHJpdmF0ZSBsb29wPzogYm9vbGVhbjtcbiAgQElucHV0KCkgcHJpdmF0ZSBsb29wQ291bnQ/OiBudW1iZXI7XG4gIEBJbnB1dCgpIHByaXZhdGUgc2hvd0N1cnNvcj86IGJvb2xlYW47XG4gIEBJbnB1dCgpIHByaXZhdGUgY3Vyc29yQ2hhcj86IHN0cmluZztcbiAgQElucHV0KCkgcHJpdmF0ZSBhdXRvSW5zZXJ0Q3NzPzogYm9vbGVhbjtcbiAgQElucHV0KCkgcHJpdmF0ZSBhdHRyPzogc3RyaW5nO1xuICBASW5wdXQoKSBwcml2YXRlIGJpbmRJbnB1dEZvY3VzRXZlbnRzPzogYm9vbGVhbjtcbiAgQElucHV0KCkgcHJpdmF0ZSBjb250ZW50VHlwZT86IHN0cmluZztcblxuICBAT3V0cHV0KCkgcHJpdmF0ZSBjb21wbGV0ZWQ6IEV2ZW50RW1pdHRlcjx2b2lkPiA9IG5ldyBFdmVudEVtaXR0ZXI8dm9pZD4oKTtcbiAgQE91dHB1dCgpIHByaXZhdGUgcHJlU3RyaW5nVHlwZWQ6IEV2ZW50RW1pdHRlcjxudW1iZXI+ID0gbmV3IEV2ZW50RW1pdHRlcjxudW1iZXI+KCk7XG4gIEBPdXRwdXQoKSBwcml2YXRlIHN0cmluZ1R5cGVkOiBFdmVudEVtaXR0ZXI8bnVtYmVyPiA9IG5ldyBFdmVudEVtaXR0ZXI8bnVtYmVyPigpO1xuICBAT3V0cHV0KCkgcHJpdmF0ZSBsYXN0U3RyaW5nQmFja3NwYWNlZDogRXZlbnRFbWl0dGVyPHZvaWQ+ID0gbmV3IEV2ZW50RW1pdHRlcjx2b2lkPigpO1xuICBAT3V0cHV0KCkgcHJpdmF0ZSB0eXBpbmdQYXVzZWQ6IEV2ZW50RW1pdHRlcjxudW1iZXI+ID0gbmV3IEV2ZW50RW1pdHRlcjxudW1iZXI+KCk7XG4gIEBPdXRwdXQoKSBwcml2YXRlIHR5cGluZ1Jlc3VtZWQ6IEV2ZW50RW1pdHRlcjxudW1iZXI+ID0gbmV3IEV2ZW50RW1pdHRlcjxudW1iZXI+KCk7XG4gIEBPdXRwdXQoKSBwcml2YXRlIHJlc2V0OiBFdmVudEVtaXR0ZXI8dm9pZD4gPSBuZXcgRXZlbnRFbWl0dGVyPHZvaWQ+KCk7XG4gIEBPdXRwdXQoKSBwcml2YXRlIHN0b3BwZWQ6IEV2ZW50RW1pdHRlcjxudW1iZXI+ID0gbmV3IEV2ZW50RW1pdHRlcjxudW1iZXI+KCk7XG4gIEBPdXRwdXQoKSBwcml2YXRlIHN0YXJ0ZWQ6IEV2ZW50RW1pdHRlcjxudW1iZXI+ID0gbmV3IEV2ZW50RW1pdHRlcjxudW1iZXI+KCk7XG4gIEBPdXRwdXQoKSBwcml2YXRlIGRlc3Ryb3llZDogRXZlbnRFbWl0dGVyPHZvaWQ+ID0gbmV3IEV2ZW50RW1pdHRlcjx2b2lkPigpO1xuXG4gIHByaXZhdGUgdHlwZWQ6IFR5cGVkO1xuICBAVmlld0NoaWxkKCd3cmFwcGVyJywgeyBzdGF0aWM6IHRydWUgfSkgcHJpdmF0ZSBjb250ZW50O1xuXG4gIG5nQWZ0ZXJWaWV3SW5pdCgpOiB2b2lkIHtcbiAgICB0aGlzLnR5cGVkID0gbmV3IFR5cGVkKFxuICAgICAgdGhpcy5jb250ZW50Lm5hdGl2ZUVsZW1lbnQucXVlcnlTZWxlY3RvcignLnR5cGluZycpLFxuICAgICAgdGhpcy5vcHRpb25zLFxuICAgICk7XG5cbiAgICBpZiAodGhpcy5zaG93Q3Vyc29yICE9PSBmYWxzZSkge1xuICAgICAgdGhpcy51cGRhdGVDdXJzb3JTdHlsZSgpO1xuICAgIH1cbiAgfVxuXG4gIHB1YmxpYyB0b2dnbGUoKTogdm9pZCB7XG4gICAgdGhpcy50eXBlZC50b2dnbGUoKTtcbiAgfVxuXG4gIHB1YmxpYyBzdG9wKCk6IHZvaWQge1xuICAgIHRoaXMudHlwZWQuc3RvcCgpO1xuICB9XG5cbiAgcHVibGljIHN0YXJ0KCk6IHZvaWQge1xuICAgIHRoaXMudHlwZWQuc3RhcnQoKTtcbiAgfVxuXG4gIHB1YmxpYyBkZXN0cm95KCk6IHZvaWQge1xuICAgIHRoaXMudHlwZWQuZGVzdHJveSgpO1xuICB9XG5cbiAgcHVibGljIGRvUmVzZXQocmVzdGFydD86IGJvb2xlYW4pOiB2b2lkIHtcbiAgICB0aGlzLnR5cGVkLnJlc2V0KHJlc3RhcnQpO1xuICB9XG5cbiAgcHJpdmF0ZSBnZXQgb3B0aW9ucygpOiBUeXBlZE9wdGlvbnMge1xuICAgIGNvbnN0IGVtaXQ6IChlbWl0dGVyOiBFdmVudEVtaXR0ZXI8dm9pZD4pID0+IChzZWxmOiBUeXBlZCkgPT4gdm9pZFxuICAgICAgPSAoZW1pdHRlcjogRXZlbnRFbWl0dGVyPHZvaWQ+KSA9PiAoKSA9PiBlbWl0dGVyLmVtaXQoKTtcblxuICAgIGNvbnN0IGVtaXRJbmRleDogKGVtaXR0ZXI6IEV2ZW50RW1pdHRlcjxudW1iZXI+KSA9PiAoaW5kZXg6IG51bWJlciwgc2VsZjogVHlwZWQpID0+IHZvaWRcbiAgICAgID0gKGVtaXR0ZXI6IEV2ZW50RW1pdHRlcjxudW1iZXI+KSA9PiAoaW5kZXg6IG51bWJlcikgPT4gZW1pdHRlci5lbWl0KGluZGV4KTtcblxuICAgIGNvbnN0IG9wdHMgPSB7XG4gICAgICBzdHJpbmdzOiB0aGlzLnN0cmluZ3MgPz8gWycnXSxcbiAgICAgIHN0cmluZ3NFbGVtZW50OiB0aGlzLnN0cmluZ3NFbGVtZW50LFxuICAgICAgdHlwZVNwZWVkOiB0aGlzLnR5cGVTcGVlZCxcbiAgICAgIHN0YXJ0RGVsYXk6IHRoaXMuc3RhcnREZWxheSxcbiAgICAgIGJhY2tTcGVlZDogdGhpcy5iYWNrU3BlZWQsXG4gICAgICBzbWFydEJhY2tzcGFjZTogdGhpcy5zbWFydEJhY2tzcGFjZSxcbiAgICAgIHNodWZmbGU6IHRoaXMuc2h1ZmZsZSxcbiAgICAgIGJhY2tEZWxheTogdGhpcy5iYWNrRGVsYXksXG4gICAgICBmYWRlT3V0OiB0aGlzLmZhZGVPdXQsXG4gICAgICBmYWRlT3V0Q2xhc3M6IHRoaXMuZmFkZU91dENsYXNzLFxuICAgICAgZmFkZU91dERlbGF5OiB0aGlzLmZhZGVPdXREZWxheSxcbiAgICAgIGxvb3A6IHRoaXMubG9vcCxcbiAgICAgIGxvb3BDb3VudDogdGhpcy5sb29wQ291bnQsXG4gICAgICBzaG93Q3Vyc29yOiB0aGlzLnNob3dDdXJzb3IsXG4gICAgICBhdXRvSW5zZXJ0Q3NzOiB0aGlzLmF1dG9JbnNlcnRDc3MsXG4gICAgICBhdHRyOiB0aGlzLmF0dHIsXG4gICAgICBiaW5kSW5wdXRGb2N1c0V2ZW50czogdGhpcy5iaW5kSW5wdXRGb2N1c0V2ZW50cyxcbiAgICAgIGNvbnRlbnRUeXBlOiB0aGlzLmNvbnRlbnRUeXBlLFxuICAgICAgb25Db21wbGV0ZTogZW1pdCh0aGlzLmNvbXBsZXRlZCksXG4gICAgICBwcmVTdHJpbmdUeXBlZDogZW1pdEluZGV4KHRoaXMucHJlU3RyaW5nVHlwZWQpLFxuICAgICAgb25TdHJpbmdUeXBlZDogZW1pdEluZGV4KHRoaXMuc3RyaW5nVHlwZWQpLFxuICAgICAgb25MYXN0U3RyaW5nQmFja3NwYWNlZDogZW1pdCh0aGlzLmxhc3RTdHJpbmdCYWNrc3BhY2VkKSxcbiAgICAgIG9uVHlwaW5nUGF1c2VkOiBlbWl0SW5kZXgodGhpcy50eXBpbmdQYXVzZWQpLFxuICAgICAgb25UeXBpbmdSZXN1bWVkOiBlbWl0SW5kZXgodGhpcy50eXBpbmdSZXN1bWVkKSxcbiAgICAgIG9uUmVzZXQ6IGVtaXQodGhpcy5yZXNldCksXG4gICAgICBvblN0b3A6IGVtaXRJbmRleCh0aGlzLnN0b3BwZWQpLFxuICAgICAgb25TdGFydDogZW1pdEluZGV4KHRoaXMuc3RhcnRlZCksXG4gICAgICBvbkRlc3Ryb3k6IGVtaXQodGhpcy5kZXN0cm95ZWQpLFxuICAgIH0gYXMgVHlwZWRPcHRpb25zO1xuXG4gICAgT2JqZWN0LmtleXMob3B0cykuZm9yRWFjaChrZXkgPT4ge1xuICAgICAgaWYgKG9wdHNba2V5XSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIGRlbGV0ZSBvcHRzW2tleV07XG4gICAgICB9XG4gICAgfSk7XG5cbiAgICByZXR1cm4gb3B0cztcbiAgfVxuXG4gIHByaXZhdGUgdXBkYXRlQ3Vyc29yU3R5bGUoKTogdm9pZCB7XG4gICAgY29uc3QgdGV4dEVsZW1lbnRTdHlsZSA9IGdldENvbXB1dGVkU3R5bGUodGhpcy5jb250ZW50Lm5hdGl2ZUVsZW1lbnQucXVlcnlTZWxlY3RvcignLnR5cGluZycpKTtcbiAgICBjb25zdCBjdXJzb3JFbGVtZW50U3R5bGUgPSB0aGlzLmNvbnRlbnQubmF0aXZlRWxlbWVudC5xdWVyeVNlbGVjdG9yKCcudHlwZWQtY3Vyc29yJykuc3R5bGU7XG5cbiAgICBjdXJzb3JFbGVtZW50U3R5bGUuZm9udFNpemUgPSB0ZXh0RWxlbWVudFN0eWxlLmZvbnRTaXplO1xuICAgIGN1cnNvckVsZW1lbnRTdHlsZS5jb2xvciA9IHRoaXMuY3Vyc29yQ29sb3IgfHwgdGV4dEVsZW1lbnRTdHlsZS5jb2xvcjtcbiAgfVxuXG4gIG5nT25DaGFuZ2VzKGNoYW5nZXM6IFNpbXBsZUNoYW5nZXMpOiB2b2lkIHtcbiAgICB0aGlzLnR5cGVkLmRlc3Ryb3koKTtcbiAgICB0aGlzLm5nQWZ0ZXJWaWV3SW5pdCgpO1xuICB9XG59XG4iXX0=